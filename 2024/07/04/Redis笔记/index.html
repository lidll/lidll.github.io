

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/image/logo_black.svg">
  <link rel="icon" href="/image/logo_black.svg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="yang zheng">
  <meta name="keywords" content="programmer,coder,father">
  
    <meta name="description" content="redis.&#x2F;redis-server ..&#x2F;redis.conf .&#x2F;redis-cli -p 6379 redisæ€§èƒ½æµ‹è¯•.&#x2F;redis-benchmark -h localhost -p 6379 -c 100 -n 100000 äº”å¤§æ•°æ®ç±»å‹redis-key è¿æ¥æ•°æ®åº“ &#x2F;redis-cli -p 6379 åˆ‡æ¢æ•°æ®åº“ select 0">
<meta property="og:type" content="article">
<meta property="og:title" content="(ğŸ“¦DB) Redisç¬”è®°">
<meta property="og:url" content="https://lidll.github.io/2024/07/04/Redis%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="è™¾ä»”çš„ç§˜å¯†åŸºåœ°">
<meta property="og:description" content="redis.&#x2F;redis-server ..&#x2F;redis.conf .&#x2F;redis-cli -p 6379 redisæ€§èƒ½æµ‹è¯•.&#x2F;redis-benchmark -h localhost -p 6379 -c 100 -n 100000 äº”å¤§æ•°æ®ç±»å‹redis-key è¿æ¥æ•°æ®åº“ &#x2F;redis-cli -p 6379 åˆ‡æ¢æ•°æ®åº“ select 0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210408163752409.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210408163834760.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210408163928740.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210409150642504.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210409153316002.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210409153706360.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210409173905051.png">
<meta property="og:image" content="https://lidll.github.io/image/postImage/image-20210409174028930.png">
<meta property="article:published_time" content="2024-07-04T09:24:22.000Z">
<meta property="article:modified_time" content="2024-07-08T08:55:05.277Z">
<meta property="article:author" content="yang zheng">
<meta property="article:tag" content="Redis">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://lidll.github.io/image/postImage/image-20210408163752409.png">
  
  
  
  <title>(ğŸ“¦DB) Redisç¬”è®° - è™¾ä»”çš„ç§˜å¯†åŸºåœ°</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"lidll.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":55,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>è™¾ä»”çš„ç§˜å¯†åŸºåœ°</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/image/default_2.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="(ğŸ“¦DB) Redisç¬”è®°"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-07-04 17:24" pubdate>
          2024å¹´7æœˆ4æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.4k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          46 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">(ğŸ“¦DB) Redisç¬”è®°</h1>
            
              <p id="updated-time" class="note note-info" style="display: none">
                
                  
                    æœ¬æ–‡æœ€åæ›´æ–°äº 2024-07-08T16:55:05+08:00
                  
                  

                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><p>.&#x2F;redis-server ..&#x2F;redis.conf</p>
<p>.&#x2F;redis-cli -p 6379</p>
<h2 id="redisæ€§èƒ½æµ‹è¯•"><a href="#redisæ€§èƒ½æµ‹è¯•" class="headerlink" title="redisæ€§èƒ½æµ‹è¯•"></a>redisæ€§èƒ½æµ‹è¯•</h2><p>.&#x2F;redis-benchmark -h localhost -p 6379 -c 100 -n 100000</p>
<h2 id="äº”å¤§æ•°æ®ç±»å‹"><a href="#äº”å¤§æ•°æ®ç±»å‹" class="headerlink" title="äº”å¤§æ•°æ®ç±»å‹"></a>äº”å¤§æ•°æ®ç±»å‹</h2><h3 id="redis-key"><a href="#redis-key" class="headerlink" title="redis-key"></a>redis-key</h3><ul>
<li>è¿æ¥æ•°æ®åº“ &#x2F;redis-cli -p 6379</li>
<li>åˆ‡æ¢æ•°æ®åº“ select 0</li>
<li>æ•°æ®åº“å¤§å° dbsize</li>
<li>æ¸…ç©ºæ•°æ®åº“ flushdb</li>
<li>æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“ flushall</li>
<li>åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨: exist name</li>
<li>ç§»é™¤å½“å‰çš„key: move name</li>
<li>è®¾ç½®key çš„è¿‡æœŸæ—¶é—´(å•ä½ä¸ºs): expise name 10</li>
<li>æŸ¥çœ‹å½“å‰keyçš„å‰©ä½™æ—¶é—´: ttl name</li>
<li>æŸ¥çœ‹å½“å‰keyç±»å‹: type name</li>
</ul>
<h3 id="String-å­—ç¬¦ä¸²"><a href="#String-å­—ç¬¦ä¸²" class="headerlink" title="String(å­—ç¬¦ä¸²):"></a>String(å­—ç¬¦ä¸²):</h3><ul>
<li>è¿½åŠ å­—ç¬¦ä¸²: append name â€œaaaâ€  å¦‚æœè¿™ä¸ªkeyä¸å­˜åœ¨,å°±ç›¸å½“äºset key</li>
<li>è·å–é•¿åº¦: strlen name</li>
<li>åŠ ä¸€å‡ä¸€: incr name &#x2F; decr name</li>
<li>æŒ‰æ­¥é•¿åŠ å‡: incrby name 10 &#x2F; decrby name 10</li>
<li>æˆªå–å­—ç¬¦ä¸² : getrange name 4 5 &#x2F;getrange name 0 -1(è·å–å…¨éƒ¨å­—ç¬¦ä¸²)</li>
<li>æ›¿æ¢: setrange name 4 abc</li>
<li>è®¾ç½®è¿‡æœŸæ—¶é—´: setex name 30 hello</li>
<li>ä¸å­˜åœ¨æ—¶åˆ›å»º: setnx name value (åœ¨åˆ†å¸ƒå¼é”ä¸­å¸¸ç”¨)</li>
<li>æ‰¹é‡è®¾ç½®é”®å€¼å¯¹: mset k1 a k2 b k3 c</li>
<li>æ‰¹é‡è·å–é”®å€¼å¯¹: mget k1 k2 k3</li>
<li>æ‰¹é‡è®¾ç½®ä¸å­˜åœ¨é”®å€¼å¯¹: msetnx k1 a k2 b k3 c åŸå­æ€§æ“ä½œ,è¦ä¹ˆä¸€èµ·æˆåŠŸ,è¦ä¹ˆä¸€èµ·å¤±è´¥</li>
<li>å…ˆgetå†set: getset è·å–åŸæ¥çš„å€¼å¹¶è®¾ç½®æ–°çš„å€¼</li>
</ul>
<h3 id="List-é“¾è¡¨"><a href="#List-é“¾è¡¨" class="headerlink" title="List(é“¾è¡¨)"></a>List(é“¾è¡¨)</h3><p><code>listå‘½ä»¤å¤§å¤šæ˜¯åœ¨å‘½ä»¤å‰å¢åŠ ä¸€ä¸ªL</code></p>
<ul>
<li>é›†åˆå·¦æ·»åŠ (ç¬¬ä¸€ä½)å…ƒç´ : lpush list a</li>
<li>é›†åˆå³æ·»åŠ (æœ€åä¸€ä½)å…ƒç´ : rpush list b</li>
<li>è¿”å›é›†åˆå†…å®¹: lrange list 0 -1</li>
<li>ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ : lpop </li>
<li>ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ : rpop</li>
<li>é€šè¿‡ä¸‹æ ‡è·å–å€¼: lindex list 0</li>
<li>è·å–é•¿åº¦: llen</li>
<li>ç§»é™¤æŒ‡å®šçš„å€¼: lrem list 1 a</li>
<li>é€šè¿‡ä¸‹æ ‡æˆªå–æŒ‡å®šé•¿åº¦: ltrim list 0 1</li>
<li>ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ,å¹¶æ·»åŠ åˆ°æ–°çš„åˆ—è¡¨ä¸­ : rpoplpush list1 list2</li>
<li>å°†åˆ—è¡¨ä¸­æŒ‡å®šä¸‹æ ‡çš„å€¼æ›¿æ¢æˆå¦å¤–ä¸€ä¸ªå€¼(ç›¸å½“äºæ›´æ–°): lset list o aaa<ul>
<li>å¦‚æœä¸å­˜åœ¨åˆ—è¡¨,å°±ä¼šæŠ¥é”™,å¦‚æœå­˜åœ¨åˆ™æ›´æ–°å€¼</li>
</ul>
</li>
<li>å°†æŸä¸ªå…·ä½“çš„valueæ’å…¥åˆ°åˆ—è¡¨ä¸­æŸä¸ªå…ƒç´ çš„å‰é¢æˆ–åé¢: linsert list before&#x2F;after aaa bbb</li>
</ul>
<h3 id="set-æ— åºé›†åˆ"><a href="#set-æ— åºé›†åˆ" class="headerlink" title="set(æ— åºé›†åˆ)"></a>set(æ— åºé›†åˆ)</h3><ul>
<li>seté‡Œé¢æ·»åŠ å€¼: sadd name value</li>
<li>æŸ¥çœ‹setä¸­çš„å…ƒç´ : smebers name</li>
<li>åˆ¤æ–­æŸä¸ªå€¼åœ¨ä¸åœ¨setä¸­: sismebers name value</li>
<li>è·å–seté›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°: scard set</li>
<li>ç§»é™¤æŒ‡å®šå…ƒç´ : srem set value</li>
<li>éšæœºæŠ½å‡ºæŒ‡å®šä¸ªæ•°çš„å…ƒç´ : srandmember name count</li>
<li>éšæœºç§»é™¤æŒ‡å®šä¸ªæ•°çš„å…ƒç´ : spop set count</li>
<li>å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼,ç§»åˆ°å¦å¤–ä¸€ä¸ªsetä¸­: smove myset myset2 â€œvalueâ€</li>
<li>å·®é›†: sdiff set1 set2</li>
<li>äº¤é›†: sinter set1 set2</li>
<li>å¹¶é›†: sunion set1 set2</li>
</ul>
<h3 id="hash-mapé›†åˆ"><a href="#hash-mapé›†åˆ" class="headerlink" title="hash(mapé›†åˆ)"></a>hash(mapé›†åˆ)</h3><ul>
<li>setä¸€ä¸ªå€¼: hset map key value</li>
<li>getä¸€ä¸ªå€¼: hget map key</li>
<li>getæ‰€æœ‰å€¼: hgetall map</li>
<li>è®¾ç½®å¤šä¸ªå€¼: hmset map key1 value1 key2 value2</li>
<li>è·å–å¤šä¸ªå€¼: hmget map key1 key2</li>
<li>åˆ é™¤æŒ‡å®šé”®å€¼å¯¹: hdel map key</li>
<li>è·å–é•¿åº¦: hlen map</li>
<li>åˆ¤æ–­æŒ‡å®šçš„keyæ˜¯å¦å­˜åœ¨: hexists map key</li>
<li>åªè·å–æ‰€æœ‰key: hkeys map</li>
<li>åªè·å–æ‰€æœ‰value: hvals map</li>
<li>è®©æŸä¸€ä¸ªå€¼å¢é•¿æŒ‡å®šå€¼: hincrby map key1 1</li>
<li>å¦‚æœä¸å­˜åœ¨åˆ™å¯ä»¥è®¾ç½®,å¦‚æœå­˜åœ¨åˆ™ä¸èƒ½è®¾ç½®: hsetnx map key value</li>
</ul>
<h3 id="zset-æœ‰åºé›†åˆ"><a href="#zset-æœ‰åºé›†åˆ" class="headerlink" title="zset(æœ‰åºé›†åˆ)"></a>zset(æœ‰åºé›†åˆ)</h3><ul>
<li>æ·»åŠ å…ƒç´  : zadd myset 1 one</li>
<li>æ·»åŠ å¤šä¸ªå…ƒç´ : zadd myset 2 two 3 three</li>
<li>éå†: zrange myset 0 -1</li>
<li>æ’åº(å‡åº): ZRANGEBYSCORE myset -inf +inf withscores</li>
<li>åˆ é™¤å…ƒç´ : zrem myset value</li>
<li>åè½¬éå†: ZREVRANGE myset 0 -1</li>
</ul>
<h2 id="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"><a href="#ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹" class="headerlink" title="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"></a>ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</h2><h3 id="Geospatial-åœ°ç†ä½ç½®"><a href="#Geospatial-åœ°ç†ä½ç½®" class="headerlink" title="Geospatial åœ°ç†ä½ç½®"></a>Geospatial åœ°ç†ä½ç½®</h3><ul>
<li>æ·»åŠ åæ ‡:  geoadd china:city 121.48169 31.235435 shanghai<ul>
<li>å—åŒ—æä¸èƒ½ç›´æ¥æ·»åŠ </li>
</ul>
</li>
<li>è·å–æŸä¸ªåœ°ç‚¹çš„ç»çº¬åº¦: geopos china:city wuhan</li>
<li>è·å–ä¸¤ç‚¹ä¹‹é—´è·ç¦»: geodist china:city shanghai beijing km [å‘½ä»¤] [key] [value1] [value2] [unit(å•ä½)]</li>
<li>ä»¥æŸç‚¹çš„ç»çº¬åº¦ä¸ºä¸­å¿ƒ,è·å–æŒ‡å®šåŠå¾„å†…çš„å…ƒç´ : GEORADIUS china:city 110 30 500 km<ul>
<li>GEORADIUS china:city 110 30 500 km withdist æ˜¾ç¤ºåˆ°ä¸­å¿ƒç‚¹çš„è·ç¦»</li>
<li>GEORADIUS china:city 110 30 500 km withcoord æ˜¾ç¤ºæ»¡è¶³æ¡ä»¶çš„å®šä½ä¿¡æ¯</li>
<li>GEORADIUS china:city 110 30 500 km count 2 ç­›é€‰å‡ºæ»¡è¶³æ¡ä»¶çš„ä¸ªæ•°</li>
<li>GEORADIUS china:city 110 30 500 km withdist withcoord count 1</li>
</ul>
</li>
<li>ä»¥æŸä¸ªå…ƒç´ ä¸ºä¸­å¿ƒ,è·å–æŒ‡å®šåŠå¾„å†…çš„å…ƒç´ : GEORADIUSBYMEMBER china:city beijing 1000 km</li>
<li>å°†ç»çº¬åº¦è½¬å˜æˆ11ä¸ªå­—ç¬¦çš„geohashå­—ç¬¦ä¸²: geohash china:city beijing</li>
</ul>
<blockquote>
<p>geoåº•å±‚æ˜¯zsetå®ç°,æ‰€ä»¥åˆ é™¤å…ƒç´ å’Œéå†å¯ä»¥ä½¿ç”¨zremå‘½ä»¤å’Œzrangeå‘½ä»¤</p>
</blockquote>
<h3 id="Hyperloglog"><a href="#Hyperloglog" class="headerlink" title="Hyperloglog"></a>Hyperloglog</h3><blockquote>
<p>ä»€ä¹ˆæ˜¯åŸºæ•°? â€“ä¸é‡å¤çš„å…ƒç´ </p>
<blockquote>
<p>Hyperloglogä½œç”¨: å»é™¤ä¸¤ä¸ªé›†åˆçš„é‡å¤</p>
<p>Hyperloglogä½¿ç”¨åœºæ™¯: ç½‘ç«™UV</p>
</blockquote>
</blockquote>
<ul>
<li>åˆ›å»ºä¸€ç»„å…ƒç´ : pfadd mykey a b c d e f g h</li>
<li>ç»Ÿè®¡å…ƒç´ ä¸ªæ•°: pfcount mykey</li>
<li>åˆå¹¶ä¸¤ç»„,å¹¶å»é™¤é‡å¤(å¹¶é›†): PFMERGE mykey3 mykey mykey2</li>
</ul>
<p>å¦‚æœå…è®¸å®¹é”™,å¯ä»¥ä½¿ç”¨.</p>
<p>å¦‚æœä¸å…è®¸å®¹é”™,åˆ™ä½¿ç”¨set.</p>
<h3 id="Bitmaps"><a href="#Bitmaps" class="headerlink" title="Bitmaps"></a>Bitmaps</h3><blockquote>
<p>ä½å­˜å‚¨</p>
<blockquote>
<p>ä½œç”¨: é€šè¿‡0å’Œ1æ¥è¡¨ç¤º</p>
</blockquote>
<blockquote>
<p>ä½¿ç”¨åœºæ™¯: ä¾‹å¦‚ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯,ç”¨æˆ·æ˜¯å¦æ´»è·ƒ;æ˜¯å¦å·²æ‰“å¡;æ˜¯å¦ç™»å½•</p>
</blockquote>
</blockquote>
<p>ä½¿ç”¨bitmapæ¥è®°å½•å‘¨ä¸€åˆ°å‘¨æ—¥çš„æ‰“å¡è®°å½•:</p>
<p>127.0.0.1:6379&gt; setbit sign 0 1 &#x2F;&#x2F;è®¾ç½®ä¸€ä¸ªbitmapå€¼<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 1 1<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 2 0<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 3 1<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 4 1<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 5 1<br>(integer) 0<br>127.0.0.1:6379&gt; setbit sign 6 0</p>
<ul>
<li><p>è®¾ç½®ä¸€ä¸ªbitmapså€¼: setbit sign 0 1</p>
</li>
<li><p>è·å–æŸä¸€ä¸ªbitmapçš„å€¼: getbit sign 1</p>
</li>
<li><p>ç»Ÿè®¡æ€»æ•°: bitcount sign</p>
</li>
</ul>
<h2 id="redisäº‹åŠ¡"><a href="#redisäº‹åŠ¡" class="headerlink" title="redisäº‹åŠ¡"></a>redisäº‹åŠ¡</h2><p>redisäº‹åŠ¡æœ¬è´¨: ä¸€ç»„å‘½ä»¤çš„é›†åˆ,ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–,å†äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­,ä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œ.</p>
<blockquote>
<p>â€”â€” é˜Ÿåˆ— set set set æ‰§è¡Œ â€”â€”</p>
</blockquote>
<p>&#x3D;&#x3D;redis äº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ&#x3D;&#x3D;</p>
<p>æ‰€æœ‰çš„å‘½ä»¤åœ¨äº‹åŠ¡ä¸­,å¹¶æ²¡æœ‰ç›´æ¥è¢«æ‰§è¡Œ,åªæ˜¯å‘èµ·æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ</p>
<p>&#x3D;&#x3D;rediså•æ¡å‘½ä»¤æ˜¯ä¿æŒåŸå­æ€§çš„,ä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§&#x3D;&#x3D;</p>
<p>redisçš„äº‹åŠ¡:</p>
<ul>
<li>å¼€å¯äº‹åŠ¡(multi)</li>
<li>å‘½ä»¤å…¥é˜Ÿ(â€¦)</li>
<li>æ‰§è¡Œäº‹åŠ¡(exec)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; MULTI #å¼€å¯äº‹åŠ¡<br>OK<br>127.0.0.1:6379&gt; set k1 v1 #å…¥é˜Ÿå‘½ä»¤<br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2<br>QUEUED<br>127.0.0.1:6379&gt; set k3 v3<br>QUEUED<br>127.0.0.1:6379&gt; keys *<br>QUEUED<br>127.0.0.1:6379&gt; exec #æ‰§è¡Œäº‹åŠ¡<br>1) OK<br>2) OK<br>3) OK<br>4) 1) &quot;k2&quot;<br>   2) &quot;k1&quot;<br>   3) &quot;k3&quot;<br></code></pre></td></tr></table></figure>

<ul>
<li>æ”¾å¼ƒäº‹åŠ¡(discard)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; MULTI<br>OK<br>127.0.0.1:6379&gt; set k1 v1<br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2<br>QUEUED<br>127.0.0.1:6379&gt; set k4 v4<br>QUEUED<br>127.0.0.1:6379&gt; DISCARD #æ”¾å¼ƒäº‹åŠ¡<br>OK<br>127.0.0.1:6379&gt; get k4<br>(nil)<br></code></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>ç¼–è¯‘æ—¶å¼‚å¸¸(ä»£ç é—®é¢˜)äº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œ</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; MULTI<br>OK<br>127.0.0.1:6379&gt; set k1 v1<br>QUEUED<br>127.0.0.1:6379&gt; set k2 qweqwe<br>QUEUED<br>127.0.0.1:6379&gt; getset k2 #å‘½ä»¤æœ‰é”™<br>(error) ERR wrong number of arguments for &#x27;getset&#x27; command<br>127.0.0.1:6379&gt; exec<br>(error) EXECABORT Transaction discarded because of previous errors.<br>127.0.0.1:6379&gt; get k2<br>&quot;v2&quot;<br></code></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>è¿è¡Œæ—¶å¼‚å¸¸,å¦‚æœäº‹åŠ¡åˆ—è¡¨ä¸­å­˜åœ¨è¯­æ³•å¼‚å¸¸,é‚£ä¹ˆæ‰§è¡Œå‘½ä»¤æ—¶,å‘½ä»¤ä¼šæ­£å¸¸è¿è¡Œ,é”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; MULTI<br>OK<br>127.0.0.1:6379&gt; set k1 v1<br>QUEUED<br>127.0.0.1:6379&gt; incr k1<br>QUEUED<br>127.0.0.1:6379&gt; exec<br>1) OK<br>2) (error) ERR value is not an integer or out of range #æ˜¾ç¤ºè¿è¡Œé”™è¯¯<br>127.0.0.1:6379&gt; get k1 #å…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œ<br>&quot;v1&quot;<br></code></pre></td></tr></table></figure>

<h4 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é” :"></a>æ‚²è§‚é” :</h4><ul>
<li>å¾ˆæ‚²è§‚,è®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºé—®é¢˜,æ— è®ºåšä»€ä¹ˆéƒ½ä¼šä¸Šé”</li>
</ul>
<h4 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”:"></a>ä¹è§‚é”:</h4><ul>
<li>å¾ˆä¹è§‚,è®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºé—®é¢˜,æ‰€ä»¥ä¸ä¼šä¸Šé”,æ›´æ–°æ•°æ®çš„æ—¶å€™å»åˆ¤æ–­ä¸€ä¸‹,åœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººä¿®æ”¹è¿‡æ•°æ®.</li>
</ul>
<h4 id="åŠ é”"><a href="#åŠ é”" class="headerlink" title="åŠ é”:"></a>åŠ é”:</h4><p>å¤šçº¿ç¨‹ä¿®æ”¹å€¼æ—¶,ä½¿ç”¨watch key å‘½ä»¤æ¥ç»™keyåŠ é”</p>
<p>å¦‚æœéœ€è¦ä¿®æ”¹ ,å°±æ˜¯ç”¨unwatchè§£é” ç„¶åå†åŠ é”æ‰§è¡Œ</p>
<h2 id="SpringBootæ•´åˆ"><a href="#SpringBootæ•´åˆ" class="headerlink" title="SpringBootæ•´åˆ"></a>SpringBootæ•´åˆ</h2><hr>
<p>SpringBoot2.xä¹‹å,åŸæ¥ä½¿ç”¨çš„jedisè¢«æ›¿æ¢ä¸ºlettuce,é‡‡ç”¨netty,è§†åŠ›å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è¿›è¡Œå…±äº«,ä¸å­˜åœ¨ç°æˆä¸å®‰å…¨çš„æƒ…å†µ,å¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®.æ›´åƒnioæ¨¡å¼</p>
<p>jedis:é‡‡ç”¨ç›´è¿,å¤šä¸ªç°æˆæ“ä½œçš„è¯,ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜,ä¸ºé¿å…çº¿ç¨‹ä¸å®‰å…¨,ä½¿ç”¨jedis poolè¿æ¥æ±  æ›´åƒbioæ¨¡å¼</p>
<p>springbootæ‰€æœ‰çš„é…ç½®ç±»,éƒ½æœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnMissingBean(name = &quot;redisTemplate&quot;)</span><span class="hljs-comment">//æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªredisTemplateæ¥æ›¿æ¢è¿™ä¸ªé»˜è®¤çš„</span><br><span class="hljs-meta">@ConditionalOnSingleCandidate(RedisConnectionFactory.class)</span><br><span class="hljs-keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;<br>  <span class="hljs-comment">//é»˜è®¤çš„ redisTemplateæ²¡æœ‰è¿‡å¤šçš„é…ç½®,rediså¯¹è±¡éƒ½æ˜¯éœ€è¦åºåˆ—åŒ–çš„!</span><br>  <span class="hljs-comment">//ä¸¤ä¸ªæ³›å‹éƒ½æ˜¯object,objectçš„ç±»å‹,æˆ‘ä»¬åä½¿ç”¨éœ€è¦å¢™çº¸è½¬æ¢&lt;String,Object&gt;</span><br>   RedisTemplate&lt;Object, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();<br>   template.setConnectionFactory(redisConnectionFactory);<br>   <span class="hljs-keyword">return</span> template;<br>&#125;<br><br><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnMissingBean</span><br><span class="hljs-meta">@ConditionalOnSingleCandidate(RedisConnectionFactory.class)</span><br><span class="hljs-keyword">public</span> StringRedisTemplate <span class="hljs-title function_">stringRedisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;<br>   <span class="hljs-type">StringRedisTemplate</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisTemplate</span>();<br>   template.setConnectionFactory(redisConnectionFactory);<br>   <span class="hljs-keyword">return</span> template;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>æ•´åˆ</p>
</blockquote>
<h4 id="1-å¯¼å…¥ä¾èµ–"><a href="#1-å¯¼å…¥ä¾èµ–" class="headerlink" title="1.å¯¼å…¥ä¾èµ–"></a>1.å¯¼å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="2-é…ç½®è¿æ¥"><a href="#2-é…ç½®è¿æ¥" class="headerlink" title="2.é…ç½®è¿æ¥"></a>2.é…ç½®è¿æ¥</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># Springbootæ‰€æœ‰çš„é…ç½®ç±»,éƒ½æœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±» é…ç½®ç±»å¯ä»¥åœ¨æºç ä¸­æ‰¾åˆ° æºç spring-boot-autoconfigureçš„é…ç½®æ–‡ä»¶ä¸­</span><br><span class="hljs-comment"># è‡ªåŠ¨é…ç½®å˜éƒ½ä¼šç»‘å®šä¸€ä¸ªpropertiesé…ç½®æ–‡ä»¶  RedisAutoConfiguration</span><br><span class="hljs-attr">spring.redis.host</span>=<span class="hljs-string">127.0.0.1</span><br><span class="hljs-attr">spring.redis.port</span>=<span class="hljs-string">6379</span><br></code></pre></td></tr></table></figure>

<h4 id="3-è‡ªå®šä¹‰redisTemplate"><a href="#3-è‡ªå®šä¹‰redisTemplate" class="headerlink" title="3.è‡ªå®šä¹‰redisTemplate"></a>3.è‡ªå®šä¹‰redisTemplate</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.noah.config;<br><br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@ClassName</span> RedisConfig</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span> TODO</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span> noah</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span> 4/8/21 3:25 PM</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Version</span> 1.0</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Author</span> yz</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Description</span> è‡ªå®šä¹‰çš„redisTemplate åºåˆ—åŒ–é—®é¢˜</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Date</span> 4/8/21 3:46 PM</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> redisConnectionFactory</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> org.springframework.data.redis.core.RedisTemplate&lt;java.lang.String,java.lang.Object&gt;</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;<br>        RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();<br>        template.setConnectionFactory(redisConnectionFactory);<br><br>        <span class="hljs-comment">//åºåˆ—åŒ–é…ç½®</span><br>        <span class="hljs-type">Jackson2JsonRedisSerializer</span> <span class="hljs-variable">jackson2JsonRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jackson2JsonRedisSerializer</span>(Object.class);<br>        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();<br>        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);<br>        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);<br>        jackson2JsonRedisSerializer.setObjectMapper(objectMapper);<br>        <span class="hljs-comment">//String çš„åºåˆ—åŒ–</span><br>        <span class="hljs-type">StringRedisSerializer</span> <span class="hljs-variable">stringRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>();<br><br>        <span class="hljs-comment">//keyé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span><br>        template.setKeySerializer(stringRedisSerializer);<br>        <span class="hljs-comment">//hashçš„keyé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span><br>        template.setHashKeySerializer(stringRedisSerializer);<br>        <span class="hljs-comment">//valueé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span><br>        template.setValueSerializer(jackson2JsonRedisSerializer);<br>        <span class="hljs-comment">//hashçš„valueé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span><br>        template.setHashValueSerializer(jackson2JsonRedisSerializer);<br>        template.afterPropertiesSet();<br><br>        <span class="hljs-keyword">return</span> template;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="redis-confè¯¦è§£"><a href="#redis-confè¯¦è§£" class="headerlink" title="redis.confè¯¦è§£"></a>redis.confè¯¦è§£</h2><p>å¯åŠ¨çš„æ—¶å€™,å°±é€šè¿‡é…ç½®æ–‡ä»¶æ¥å¯åŠ¨</p>
<blockquote>
<p>å•ä½</p>
</blockquote>
<p><img src="/image/postImage/image-20210408163752409.png" srcset="/img/loading.gif" lazyload></p>
<p>1.é…ç½®æ–‡ä»¶ unitå•ä½ å¯¹å¤§å°å†™ä¸æ•æ„Ÿ</p>
<blockquote>
<p>åŒ…å«</p>
</blockquote>
<p><img src="/image/postImage/image-20210408163834760.png" srcset="/img/loading.gif" lazyload></p>
<p>å¯ä»¥æŠŠé…ç½®æ–‡ä»¶éƒ½åŒ…å«è¿‡æ¥</p>
<blockquote>
<p>ç½‘ç»œ</p>
</blockquote>
<p><img src="/image/postImage/image-20210408163928740.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">bind 172.0.0.1 #ç»‘å®šçš„ip<br>protected-mode yes #ä¿æŠ¤æ¨¡å¼<br>port 6379 #ç«¯å£<br></code></pre></td></tr></table></figure>

<blockquote>
<p>é€šç”¨GENERAL</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">daemonize yes #ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œ,é»˜è®¤æ˜¯no,æˆ‘ä»¬éœ€è¦è‡ªå·±å¼€å¯ä¸ºyes<br>pidfile /var/run/redis_6379.pid #å¦‚æœä»¥åå°çš„æ–¹å¼è¿è¡Œ,æˆ‘ä»¬å°±éœ€è¦æŒ‡å®šä¸€ä¸ªpidæ–‡ä»¶<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ—¥å¿—</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Specify the server verbosity level.</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">This can be one of:</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">debug (a lot of information, useful <span class="hljs-keyword">for</span> development/testing)</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">verbose (many rarely useful info, but not a mess like the debug level)</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">notice (moderately verbose, what you want <span class="hljs-keyword">in</span> production probably)</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">warning (only very important / critical messages are logged)</span><br>loglevel notice<br><br>logfile &quot;&quot; #æ—¥å¿—çš„æ–‡ä»¶ä½ç½®å<br>database 16 #æ•°æ®åº“çš„æ•°é‡,é»˜è®¤æ˜¯16ä¸ªæ•°æ®åº“<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p>å¿«ç…§</p>
</blockquote>
<p>æŒä¹…åŒ–,å†è§„å®šçš„æ—¶é—´å†…,æ‰§è¡Œäº†å¤šå°‘æ¬¡æ“ä½œ,åˆ™ä¼šæŒä¹…åŒ–åˆ°æ–‡ä»¶ .rdb .aof</p>
<p>redisæ˜¯å†…å­˜æ•°æ®åº“å¦‚æœæ²¡æœ‰æŒä¹…åŒ–,é‚£ä¹ˆæ–­ç”µæ•°æ®å³å¤±å».</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">å¦‚æœ900så†…,å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ª1 keyè¿›è¡Œäº†ä¿®æ”¹,æˆ‘ä»¬å°±è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span><br>save 900 1<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¦‚æœ300så†…,å¦‚æœè‡³å°‘æœ‰10æ¬¡keyè¿›è¡Œäº†ä¿®æ”¹,å°±è¿›è¡ŒæŒä¹…åŒ–</span><br>save 300 10<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¦‚æœ60ç§’å†…,å¦‚æœæœ‰10000ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹,å°±è¿›è¡ŒæŒä¹…åŒ–</span><br>save 60 10000<br><br>stop-writes-on-bgsave-error yes #æŒä¹…åŒ–å¦‚æœå‡ºé”™äº† æ˜¯å¦è¿˜è¿›è¡Œå·¥ä½œ<br>rdbcompression yes #æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶ è¿™æ—¶éœ€è¦æ¶ˆè€—ä¸€äº›å†…å­˜èµ„æº<br>rdbchecksum yes #æ˜¯å¦æ ¡éªŒrdbæ–‡ä»¶ ä¼šè¿›è¡Œrdbä¿®å¤<br>dbfilename dump.rdb #rdbæ–‡ä»¶å<br>dir ./  #rdbä¿å­˜çš„ç›®å½•<br></code></pre></td></tr></table></figure>

<blockquote>
<p>REPLICATIONå¤åˆ¶,ä¸»ä»å¤åˆ¶</p>
</blockquote>
<blockquote>
<p>SECURITY å®‰å…¨</p>
</blockquote>
<p>å¯ä»¥å†è¿™é‡Œè®¾ç½®redisçš„å¯†ç ,é»˜è®¤æ˜¯æ²¡æœ‰å¯†ç çš„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">rediså®¢æˆ·ç«¯å‘½ä»¤</span><br>config get requirepass #è·å–rediså¯†ç <br>config set requirepass &quot;123&quot; #è®¾ç½®rediså¯†ç <br>auth 123 #ä½¿ç”¨å¯†ç ç™»å½•<br></code></pre></td></tr></table></figure>

<blockquote>
<p>é™åˆ¶CLIENT</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">maxclients 10000 #è®¾ç½®å¯ä»¥è¿æ¥çš„æœ€å¤§å®¢æˆ·ç«¯æ•°<br>maxmemory &lt;bytes&gt; #redisé…ç½®æœ€å¤§çš„å†…å­˜å®¹é‡<br>maxmemory-policy noeviction #å†…å­˜è¾¾åˆ°ä¸Šé™ä¹‹åçš„å¤„ç†ç­–ç•¥<br></code></pre></td></tr></table></figure>

<blockquote>
<p>APPEND ONLY MODE  aofé…ç½®</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">appendonly no #é»˜è®¤æ˜¯ä¸å¼€å¯aofæ¨¡å¼çš„,é»˜è®¤æ˜¯ä½¿ç”¨rdbæ–¹å¼æŒä¹…åŒ–çš„,åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨rdb<br>appendfilename &quot;appendonly.aof&quot; #æŒä¹…åŒ–çš„æ–‡ä»¶å<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">appendfsync always <span class="hljs-comment">#æ¯æ¬¡ä¿®æ”¹éƒ½åŒæ­¥,æ¶ˆè€—æ€§èƒ½</span></span><br>appendfsync everysec #æ¯ç§’æ‰§è¡Œä¸€æ¬¡åŒæ­¥,å¯èƒ½ä¼šä¸¢å¤±è¿™1så¾—æ•°æ®<br><span class="hljs-meta prompt_"># </span><span class="language-bash">appendfsync no <span class="hljs-comment">#ä¸æ‰§è¡ŒåŒæ­¥,æ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®,æ•°æ®æ˜¯æœ€å¿«çš„</span></span><br></code></pre></td></tr></table></figure>

<h2 id="redisæŒä¹…åŒ–"><a href="#redisæŒä¹…åŒ–" class="headerlink" title="redisæŒä¹…åŒ–"></a>redisæŒä¹…åŒ–</h2><h4 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h4><blockquote>
<p>rdbè§¦å‘æœºåˆ¶</p>
</blockquote>
<p>1.saveçš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹,ä¼šè‡ªåŠ¨è§¦å‘rdbè§„åˆ™</p>
<p>2.æ‰§è¡Œflushallå‘½ä»¤,ä¹Ÿä¼šè§¦å‘rdbè§„åˆ™</p>
<p>3.é€€å‡ºredis,ä¹Ÿä¼šäº§ç”Ÿrdbæ–‡ä»¶</p>
<p>å¤‡ä»½å°±è‡ªåŠ¨æŒ¡ç”Ÿæˆä¸€ä¸ªdump.rdb</p>
<blockquote>
<p>å¦‚ä½•æ¢å¤rdbæ–‡ä»¶</p>
</blockquote>
<p>1.åªéœ€è¦å°†rdbæ–‡ä»¶æ”¾åœ¨rediså¯åŠ¨ç›®å½•å°±å¯ä»¥äº†,rediså¯åŠ¨çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨æ£€æŸ¥dump.rdbæ¢å¤å…¶ä¸­çš„æ•°æ®</p>
<p>2.æŸ¥çœ‹éœ€è¦ä¿å­˜çš„ä½ç½®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">rediså®¢æˆ·ç«¯</span><br>config get dir<br></code></pre></td></tr></table></figure>

<p><strong>ä¼˜ç‚¹:</strong></p>
<p>1.é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</p>
<p>2.å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜</p>
<p><strong>ç¼ºç‚¹:</strong></p>
<p>1.éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œæ“ä½œ,å¦‚æœredisæ„å¤–å®•æœºäº†,æœ€åä¸€æ¬¡çš„ä¿®æ”¹æ•°æ®å°±æ²¡æœ‰äº†</p>
<p>2.forkè¿›ç¨‹çš„æ—¶å€™,ä¼šå ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´</p>
<h4 id="AOF-Append-Only-File"><a href="#AOF-Append-Only-File" class="headerlink" title="AOF(Append Only File)"></a>AOF(Append Only File)</h4><p>å°†æˆ‘ä»¬çš„æ‰€æœ‰å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥,åƒhistoryå‘½ä»¤,å°†æ‰§è¡Œçš„å‘½ä»¤å…¨éƒ¨éƒ½æ‰§è¡Œä¸€é</p>
<p>åªè®°å½•å†™çš„å‘½ä»¤,è¯»å–çš„å‘½ä»¤ä¸è®°å½•</p>
<p>è¯¥æ¨¡å¼é»˜è®¤æ˜¯ä¸å¼€å¯çš„,æˆ‘ä»¬éœ€è¦è¿›è¡Œæ‰‹åŠ¨é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">appendonly no #é»˜è®¤æ˜¯ä¸å¼€å¯çš„,yesè¡¨ç¤ºå¼€å¯<br></code></pre></td></tr></table></figure>

<p><strong>aofçš„æ–‡ä»¶é»˜è®¤ä¸ºappendonly.aof</strong></p>
<p>å¦‚æœaofæ–‡ä»¶æœ‰é”™ä½,rediså°±å¯åŠ¨ä¸èµ·æ¥äº†,æˆ‘ä»¬éœ€è¦é€šè¿‡å·¥å…·ä¿®å¤</p>
<p>redis-check-aof â€“fix appendonly.aof</p>
<p>é‡å¯å°±èƒ½æ¢å¤æ­£å¸¸</p>
<blockquote>
<p>aofçš„ä¼˜ç‚¹å’Œç¼ºç‚¹</p>
</blockquote>
<p><strong>ä¼˜ç‚¹</strong></p>
<p>1.æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥,æ–‡ä»¶çš„å®Œæ•´æ€§ä¼šæ›´å¥½</p>
<p>2.æ¯ç§’åŒæ­¥ä¸€æ¬¡, å¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®</p>
<p>3.ä»ä¸åŒæ­¥,æ•ˆç‡æ˜¯æœ€é«˜çš„</p>
<p><strong>ç¼ºç‚¹</strong></p>
<p>1.ç›¸å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´aofè¿œè¿œå¤§äºrdb,ä¿®å¤çš„é€Ÿåº¦ä¹Ÿæ¯”rdbæ…¢</p>
<p>2.aofçš„è¿è¡Œæ•ˆç‡ä¹Ÿæ¯”rdbæ…¢,æ‰€ä»¥redisé»˜è®¤çš„é…ç½®æ˜¯rdbæŒä¹…åŒ–</p>
<h2 id="redisè®¢é˜…å‘å¸ƒ"><a href="#redisè®¢é˜…å‘å¸ƒ" class="headerlink" title="redisè®¢é˜…å‘å¸ƒ"></a>redisè®¢é˜…å‘å¸ƒ</h2><p>rediså‘å¸ƒè®¢é˜…(pub&#x2F;sub)æ˜¯ä¸€ç§<strong>æ¶ˆæ¯é€šä¿¡æ¨¡å¼</strong>:å‘å¸ƒè€…(pub)å‘é€æ¶ˆæ¯,è®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯.å¾®åš,å¾®ä¿¡,å…³æ³¨ç³»ç»Ÿ</p>
<p>rediså®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»ä¹‰æ•°é‡çš„é¢‘é“.</p>
<p>è®¢é˜…è€…:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; SUBSCRIBE zhengge #è®¢é˜…ä¸€ä¸ªé€šé“<br>Reading messages... (press Ctrl-C to quit)<br>1) &quot;subscribe&quot;<br>2) &quot;zhengge&quot;<br>3) (integer) 1<br>1) &quot;message&quot;<br>2) &quot;zhengge&quot;<br>3) &quot;nihao&quot;<br>1) &quot;message&quot;<br>2) &quot;zhengge&quot;<br>3) &quot;sdsdf&quot;<br></code></pre></td></tr></table></figure>

<p>å‘é€ç«¯:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; PUBLISH zhengge &quot;nihao&quot; #æŒ‡å®šè®¢é˜…å‘å¸ƒæ¶ˆæ¯<br>(integer) 1<br>127.0.0.1:6379&gt; PUBLISH zhenge sdsdf<br>(integer) 0<br>127.0.0.1:6379&gt; PUBLISH zhengge sdsdf<br>(integer) 1<br></code></pre></td></tr></table></figure>

<p>é€šè¿‡subscribeå‘½ä»¤è®¢é˜…æŸé¢‘é“å,redis-serveré‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸,å­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ªé¢‘é“,è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨,é“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ªchannelçš„å®¢æˆ·ç«¯,subscribeå‘½ä»¤çš„å…³é”®,å°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®šchannelçš„è®¢é˜…åˆ—è¡¨ä¸­.</p>
<h2 id="redisä¸»ä»å¤åˆ¶-replication"><a href="#redisä¸»ä»å¤åˆ¶-replication" class="headerlink" title="redisä¸»ä»å¤åˆ¶(replication)"></a>redisä¸»ä»å¤åˆ¶(replication)</h2><p>master&#x2F;leader ä¸»æœº</p>
<p>slave ä»æœº</p>
<p>æ•°æ®çš„èµ‹å€¼æ˜¯å•å‘çš„,åªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹.</p>
<p>ä¸»ä»å¤åˆ¶,è¯»å†™åˆ†ç¦»,å¯ä»¥å‡ç¼“æœåŠ¡å™¨å‹åŠ›,æ¶æ„ä¸­å¸¸ç”¨.æœ€ä½é›†ç¾¤éœ€è¦ä¸€ä¸»äºŒä»,å“¨å…µæœºåˆ¶éœ€è¦äºŒå°ä»¥ä¸Š</p>
<p><strong>ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬:</strong></p>
<p>1.æ•°æ®å†—ä½™</p>
<p>2.æ•…éšœæ¢å¤</p>
<p>3.è´Ÿè½½å‡è¡¡</p>
<p>4.é«˜å¯ç”¨(é›†ç¾¤)åŸºçŸ³</p>
<p><strong>å•å°redisæœ€å¤§ä½¿ç”¨å†…å­˜ä¸è¶…è¿‡20G</strong></p>
<h4 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h4><hr>
<p>å•æœåŠ¡å™¨å¤šå®ä¾‹: åªé…ç½®ä»åº“,ä¸ç”¨é…ç½®ä¸»åº“</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; info replication # æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Replication</span><br>role:master #è§’è‰²<br>connected_slaves:0 #æ²¡æœ‰ä»æœº<br>master_replid:b89b5421af09a64ed749f0277e81f05a66e558c5<br>master_replid2:0000000000000000000000000000000000000000<br>master_repl_offset:0<br>second_repl_offset:-1<br>repl_backlog_active:0<br>repl_backlog_size:1048576<br>repl_backlog_first_byte_offset:0<br>repl_backlog_histlen:0<br></code></pre></td></tr></table></figure>

<p>å¤åˆ¶ä¸‰ä¸ªé…ç½®æ–‡ä»¶,ç„¶åä¿®æ”¹å¯¹åº”çš„ä¿¡æ¯</p>
<p>1.ç«¯å£</p>
<p>2.pidåå­—</p>
<p>3.logæ–‡ä»¶å</p>
<p>3.dump.rdbåå­—</p>
<p>ä¿®æ”¹å®Œæ¯•åæŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨è¿›ç¨‹, .&#x2F;redis-server ..&#x2F;redisxxxx.conf</p>
<h5 id="ä¸€ä¸»äºŒä»"><a href="#ä¸€ä¸»äºŒä»" class="headerlink" title="ä¸€ä¸»äºŒä»"></a>ä¸€ä¸»äºŒä»</h5><hr>
<p><em><strong>é»˜è®¤æƒ…å†µä¸‹,æ¯å°redisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹</strong></em></p>
<p>ä»æœºè®¤ä¸»æœº: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">slaveof 127.0.0.1 6379<br></code></pre></td></tr></table></figure>

<p>çœŸå®çš„ä¸»ä»é…ç½®åº”è¯¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®,è¿™æ ·çš„è¯æ˜¯æ°¸ä¹…çš„,å‘½ä»¤æ˜¯æš‚æ—¶çš„</p>
<blockquote>
<p>ç»†èŠ‚</p>
</blockquote>
<p>ä¸»æœºæ‰èƒ½å†™,ä»æœºåªèƒ½è¯».ä¸»æœºä¸­çš„æ‰€æœ‰ä¿¡æ¯å’Œæ•°æ®,éƒ½ä¼šè¢«ä»æœºå¤åˆ¶</p>
<p>å¦‚æœæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®çš„ä¸»ä»,é‡å¯,ä»æœºä¼šé»˜è®¤å˜æˆä¸»æœº,åªè¦å˜ä¸ºä»æœº,ç«‹é©¬å°±èƒ½è·å¾—ä¸»æœºçš„å€¼</p>
<blockquote>
<p>å¤åˆ¶åŸç†</p>
</blockquote>
<p>slaveå¯åŠ¨æˆåŠŸé“¾æ¥masteråä¼šå‘é€ä¸€ä¸ªsyncåŒæ­¥å‘½ä»¤</p>
<p>masteræ¥åˆ°å‘½ä»¤,å¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹,åŒæ—¶æ‰‹æœºæ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤,å†åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹å,<em><strong>masterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°slave,å¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥.</strong></em></p>
<p>å…¨é‡å¤åˆ¶: slaveæœåŠ¡å†æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®å,å°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜</p>
<p>å¢é‡å¤åˆ¶: masterç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¸€æ¬¡ä¼ ç»™slave,å®ŒæˆåŒæ­¥</p>
<p>ä½†æ˜¯åªè¦æ˜¯é‡æ–°é“¾æ¥master,ä¸€æ¬¡å®Œå…¨åŒæ­¥(å¢é‡å¤åˆ¶)å°†è¢«è‡ªåŠ¨æ‰§è¡Œ</p>
<blockquote>
<p>å¤šå±‚é“¾è·¯</p>
</blockquote>
<p>ä¸Šä¸€ä¸ªmasteré“¾æ¥slave</p>
<p><img src="/image/postImage/image-20210409150642504.png" srcset="/img/loading.gif" lazyload></p>
<p>æ­¤æ—¶81èŠ‚ç‚¹è¿˜æ˜¯ä¸ºslave,æ‰€ä»¥ä¾ç„¶ä¸èƒ½å†™å…¥,ä½†æ˜¯ä¸º82çš„master</p>
<p>81åŒæ­¥80æ•°æ®,82åŒæ­¥81æ•°æ®</p>
<p>å¦‚æœ80å®•æœº,ä½¿ç”¨å‘½ä»¤  SLAVEOF no one å¯ä»¥ä½¿ç”¨81å˜ä¸ºmaster.å…¶ä»–èŠ‚ç‚¹å°±å¯ä»¥æ‰‹åŠ¨é“¾æ¥å¯¼æœ€æ–°çš„ä¸»èŠ‚ç‚¹</p>
<h2 id="å“¨å…µæ¨¡å¼"><a href="#å“¨å…µæ¨¡å¼" class="headerlink" title="å“¨å…µæ¨¡å¼"></a>å“¨å…µæ¨¡å¼</h2><p>(è‡ªåŠ¨é€‰ä¸¾è€å¤§çš„æ¨¡å¼)</p>
<p>redisä»2.8å¼€å§‹æ­£å¼æä¾›äº†sentinel(å“¨å…µ)æ¶æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>&#x3D;&#x3D;è‡ªåŠ¨å°†ä»åº“è½¬æ¢ä¸ºä¸»åº“&#x3D;&#x3D;</p>
<p> å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼,é¦–å…ˆredisæä¾›äº†å“¨å…µçš„å‘½ä»¤,å“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹,ä½œä¸ºè¿›ç¨‹,ä»–ä¼šç‹¬ç«‹è¿è¡Œ.å…¶åŸç†æ˜¯å“¨å…µé€šè¿‡å‘é€å‘½ä»¤,ç­‰å¾…redisæœåŠ¡å™¨å“åº”,ä»è€Œç›‘æ§è¿è¡Œçš„å¤šä¸ªrediså®ä¾‹.</p>
<p><img src="/image/postImage/image-20210409153316002.png" srcset="/img/loading.gif" lazyload></p>
<p> å“¨å…µæœ‰ä¸¤ä¸ªä½œç”¨:</p>
<ul>
<li>é€šè¿‡å‘é€å‘½ä»¤,è®©redisæœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€,åŒ…æ‹¬ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡</li>
<li>å½“å“¨å…µæ£€æŸ¥å¯¼masterå®•æœº,ä¼šè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmaster,ç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼åŒäº‹å…¶ä»–çš„ä»æœåŠ¡å™¨,ä¿®æ”¹é…ç½®æ–‡ä»¶,è®©ä»–ä»¬åˆ‡æ¢ä¸»æœº.</li>
</ul>
<p>ç„¶è€Œä¸€ä¸ªå“¨å…µè¿›ç¨‹å¯¹redisæœåŠ¡å™¨è¿›è¡Œç›‘æ§,å¯èƒ½ä¼šå‡ºç°é—®é¢˜,ä¸ºæ­¤,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªå“¨å…µè¿›è¡Œç›‘æ§.å„ä¸ªå“¨å…µä¹‹é—´è¿˜ä¼šè¿›è¡Œç›‘æ§,è¿™æ ·å°±å½¢æˆäº†å¤šå“¨å…µæ¨¡å¼.</p>
<p><img src="/image/postImage/image-20210409153706360.png" srcset="/img/loading.gif" lazyload></p>
<p>å‡è®¾ä¸»æœåŠ¡å™¨å®•æœº,å“¨å…µ1å…ˆæ£€æŸ¥å¯¼è¿™ä¸ªç»“æœ.ç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œfailoverè¿‡ç¨‹,ä»…ä»…æ˜¯å“¨å…µ1ä¸»è§‚çš„è®¤ä¸ºä¸»æœåŠ¡å™¨ä¸å¯ç”¨,è¿™ä¸ªç°è±¡ç§°ä¸º<em><strong>ä¸»è§‚ä¸‹çº¿</strong></em>.å½“åé¢çš„å“¨å…µä¹Ÿæ£€æµ‹åˆ°ä¸»æœåŠ¡å™¨ä¸å¯ç”¨,å¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€å®šå€¼æ—¶,é‚£ä¹ˆå“¨å…µä¹‹é—´å°±ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨,æŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·,è¿›è¡Œfailover[æ•…éšœè½¬ç§»]æ“ä½œ.åˆ‡æ¢æˆåŠŸå,å°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…é€šçŸ¥,è®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ä»æœåŠ¡å™¨å®ç°åˆ‡æ¢ä¸»æœº,è¿™ä¸ªè¿‡ç¨‹æˆä¸º<em><strong>å®¢è§‚ä¸‹çº¿</strong></em>.</p>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<p>1.é…ç½®å“¨å…µé…ç½®æ–‡ä»¶sentinel.conf</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">sentinel monitor è¢«ç›‘æ§çš„åç§° host post 1</span><br>sentinel monitor myredis 127.0.0.1 6379 1<br></code></pre></td></tr></table></figure>

<p>åé¢çš„è¿™ä¸ªæ•°å­—1ä»£è¡¨,ä¸»æœºå®•æœº,slaveæŠ•ç¥¨çœ‹è®©è°æ¥æ›¿æˆä¸ºä¸»æœº,ç¥¨æ•°æœ€å¤šçš„å°±ä¼šæˆä¸ºä¸»æœº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">å¯åŠ¨sentinel</span><br>./redis-server ../sentinel.conf<br></code></pre></td></tr></table></figure>

<p>å¦‚æœä¸»æœºå›æ¥äº†,åªèƒ½å½’å¹¶åˆ°æ–°çš„ä¸»æœºä¸‹,å½“åšä»æœº,è¿™å°±æ˜¯å“¨å…µæ¨¡å¼çš„è§„åˆ™</p>
<blockquote>
<p>å“¨å…µæ¨¡å¼</p>
</blockquote>
<p>ä¼˜ç‚¹:</p>
<p>1.å“¨å…µé›†ç¾¤,åŸºäºçš„ä¸»ä»å¤åˆ¶æ¨¡å¼,æ‰€æœ‰çš„ä¸»ä»é…ç½®æœ‰ç‚¹,ä»–å…¨æœ‰</p>
<p>2.ä¸»ä»å¯ä»¥åˆ‡æ¢,æ•…éšœå¯ä»¥è½¬ç§»,ç³»ç»Ÿçš„å¯ç”¨æ€§å°±ä¼šæ›´å¥½</p>
<p>3.å“¨å…µæ¨¡å¼å°±æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§,ä»æ‰‹åŠ¨åˆ°è‡ªåŠ¨,æ›´åŠ å¥å£®</p>
<p>ç¼ºç‚¹:</p>
<p>1.redisä¸å¥½åœ¨çº¿æ‰©å®¹,é›†ç¾¤å®¹é‡ä¸€æ—¦åˆ°è¾¾ä¸Šçº¿,åœ¨çº¿æ‰©å®¹å°±ååˆ†éº»çƒ¦</p>
<p>2.å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦,é‡Œé¢æœ‰å¾ˆå¤šé€‰æ‹©</p>
<h2 id="redisç¼“å­˜ç©¿é€å’Œé›ªå´©"><a href="#redisç¼“å­˜ç©¿é€å’Œé›ªå´©" class="headerlink" title="redisç¼“å­˜ç©¿é€å’Œé›ªå´©"></a>redisç¼“å­˜ç©¿é€å’Œé›ªå´©</h2><blockquote>
<p>æœåŠ¡çš„é«˜å¯ç”¨</p>
</blockquote>
<h4 id="ç¼“å­˜ç©¿é€-æŸ¥ä¸åˆ°"><a href="#ç¼“å­˜ç©¿é€-æŸ¥ä¸åˆ°" class="headerlink" title="ç¼“å­˜ç©¿é€(æŸ¥ä¸åˆ°)"></a>ç¼“å­˜ç©¿é€(æŸ¥ä¸åˆ°)</h4><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>ç”¨æˆ·æƒ³è¦æŸ¥è¯¢ä¸€ä¸ªæ•°æ®,ç¼“å­˜ä¸­æ²¡æœ‰å‘½ä¸­,æŒä¹…å±‚ä¹Ÿæ²¡æœ‰å‘½ä¸­.ç„¶åå¤šæ¬¡é‡å¤æŸ¥è¯¢æŒä¹…å±‚,é€ æˆæŒä¹…å±‚å‹åŠ›è¿‡å¤§,è¿™æ—¶å°±å‡ºç°äº†ç¼“å­˜ç©¿é€.</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p>å¸ƒéš†è¿‡æ»¤å™¨</p>
<p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„,å¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥hashå½¢å¼å­˜å‚¨,åœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒ,ä¸ç¬¦åˆåˆ™ä¸¢å¼ƒ.ä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›</p>
<p><img src="/image/postImage/image-20210409173905051.png" srcset="/img/loading.gif" lazyload></p>
<p>ç¼“å­˜ç©ºå¯¹è±¡</p>
<p>å½“å­˜å‚¨å±‚ä¸å‘½ä¸­å,å³ä½¿è¿”å›çš„ç©ºå¯¹è±¡ä¹Ÿå°†å…¶ç¼“å­˜èµ·æ¥,åŒæ—¶ä¼šè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´,ä¹‹åå†è®¿é—®è¿™ä¸ªæ•°æ®å°†ä¼šä»ç¼“å­˜ä¸­è·å–,ä¿æŠ¤äº†åç«¯æ•°æ®æº</p>
<p><img src="/image/postImage/image-20210409174028930.png" srcset="/img/loading.gif" lazyload></p>
<p>ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜:</p>
<p>1.å¦‚æœç©ºå€¼èƒ½å¤Ÿè¢«ç¼“å­˜èµ·æ¥,è¿™å°±æ„å‘³ç€ç¼“å­˜éœ€è¦æ›´å¤šçš„ç©ºé—´å­˜å‚¨æ›´å¤šçš„é”®,å› ä¸ºå½“ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„ç©ºå€¼çš„é”®</p>
<p>2.å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´,è¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´ä¸ä¸€è‡´,è¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´çš„ä¸šåŠ¡ä¼šæœ‰å½±å“</p>
<h4 id="ç¼“å­˜å‡»ç©¿-é‡å¤ªå¤§-ç¼“å­˜è¿‡æœŸ"><a href="#ç¼“å­˜å‡»ç©¿-é‡å¤ªå¤§-ç¼“å­˜è¿‡æœŸ" class="headerlink" title="ç¼“å­˜å‡»ç©¿(é‡å¤ªå¤§,ç¼“å­˜è¿‡æœŸ)"></a>ç¼“å­˜å‡»ç©¿(é‡å¤ªå¤§,ç¼“å­˜è¿‡æœŸ)</h4><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>æŸä¸ªkeyéå¸¸çƒ­ç‚¹,åœ¨ä¸æ–­çš„æ‰›ç€å¤§å¹¶å‘,å¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸ªç‚¹è¿›è¡Œè®¿é—®,å½“è¿™ä¸ªkeyåœ¨æ˜¯å¤±æ•ˆçš„ç¬é—´,æŒç»­çš„å¤§å¹¶å‘å°±ä¼šç©¿ç ´ç¼“å­˜,ç›´æ¥è¯·æ±‚æ•°æ®åº“.</p>
<p>å½“keyåœ¨è¿‡æœŸç¬é—´,æœ‰å¤§é‡çš„è¯·æ±‚å¹¶å‘è®¿é—®.è¿™ç±»æ•°æ®ä¸€èˆ¬æ˜¯çƒ­ç‚¹æ•°æ®,ç”±äºç¼“å­˜è¿‡æœŸ,ä¼šåŒæ—¶è®¿é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°çš„æ•°æ®,å¹¶ä¸”å›å†™ç¼“å­˜,ä¼šå¯¼è‡´æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p><em><strong>è®¾ç½®çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸ</strong></em></p>
<p>ä»ç¼“å­˜çš„å±‚é¢æ¥çœ‹,æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´,æ‰€ä»¥ä¸ä¼šå‡ºç°çƒ­ç‚¹keyè¿‡æœŸåäº§ç”Ÿçš„é—®é¢˜</p>
<p><em><strong>åŠ äº’æ–¥é”</strong></em></p>
<p>åˆ†å¸ƒå¼é”:ä½¿ç”¨åˆ†å¸ƒå¼é”,ä¿è¯å¯¹äºæ¯ä¸ªkeyåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡,å…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™,å› æ­¤åªéœ€è¦ç­‰å¾…å³å¯.è¿™ç§æ–¹å¼å°†é«˜å¹¶å‘çš„å‹åŠ›è½¬ç§»åˆ°äº†åˆ†å¸ƒå¼é”,å› æ­¤å¯¹åˆ†å¸ƒå¼é”çš„è€ƒéªŒå¾ˆå¤§</p>
<h4 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h4><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>ç¼“å­˜é›ªå´©,æ˜¯æŒ‡åœ¨æŸä¸€ä¸ªæ—¶é—´æ®µ,ç¼“å­˜é›†ä¸­è¿‡æœŸ,rediså®•æœº</p>
<blockquote>
<p>è§£å†³æ–¹å¼</p>
</blockquote>
<p><strong>redisé«˜å¯ç”¨</strong></p>
<p>è¿™ä¸ªæ€æƒ³çš„æ„ä¹‰æ˜¯,æ—¢ç„¶redisæœ‰å¯èƒ½æŒ‚æ‰,é‚£æˆ‘å°±å¤šå¢è®¾å‡ å°reids,è¿™æ ·ä¸€å°æŒ‚æ‰ä¹‹åå…¶ä»–çš„è¿˜å¯ä»¥ç»§ç»­å·¥ä½œ,å…¶å®å°±æ˜¯æ­å»ºé›†ç¾¤(å¼‚åœ°å¤šæ´»)</p>
<p><strong>é™æµé™çº§</strong></p>
<p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€è·¯,åœ¨ç¼“å­˜å®ç°å,é€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶æœæ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡.æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜,å…¶ä»–çº¿ç¨‹ç­‰å¾….</p>
<p><strong>æ•°æ®é¢„çƒ­</strong></p>
<p>åœ¨æ­£å¼éƒ¨ç½²ä¹‹å‰,æŠŠå¯èƒ½çš„æ•°æ®å…ˆé¢„å…ˆè®¿é—®ä¸€é,è¿™æ ·éƒ¨åˆ†å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½å¯¼ç¼“å­˜ä¸­,åœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸åŒçš„key,è®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´,è®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%F0%9F%93%A6DB/" class="category-chain-item">ğŸ“¦DB</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Redis/" class="print-no-link">#Redis</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>(ğŸ“¦DB) Redisç¬”è®°</div>
      <div>https://lidll.github.io/2024/07/04/Redisç¬”è®°/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>yang zheng</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2024å¹´7æœˆ4æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/07/04/Redis%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5/" title="(ğŸ“¦DB) Redisç¼“å­˜ç­–ç•¥">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">(ğŸ“¦DB) Redisç¼“å­˜ç­–ç•¥</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/07/04/Mysql%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/" title="(ğŸ“¦DB) Mysqläº‹åŠ¡éš”ç¦»çº§åˆ«">
                        <span class="hidden-mobile">(ğŸ“¦DB) Mysqläº‹åŠ¡éš”ç¦»çº§åˆ«</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://cdn.staticfile.org/waline/2.15.5/waline.min.css')
      Fluid.utils.createScript('https://cdn.staticfile.org/waline/2.15.5/waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"c.tinto.top","path":"window.location.pathname","meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="#" target="_blank" rel="nofollow noopener"><span>The secret base of crayfish</span></a> <i class="iconfont icon-love"></i> <a href="#" target="_blank" rel="nofollow noopener"><span>è™¾ä»”çš„ç§˜å¯†åŸºåœ°</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  
<script>
  var relativeDate = function() {
    var updatedTime = document.getElementById('updated-time');
    if (updatedTime) {
      var text = updatedTime.textContent;
      var reg = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/;
      var matchs = text.match(reg);
      if (matchs) {
        var relativeTime = moment(matchs[0]).fromNow();
        updatedTime.textContent = text.replace(reg, relativeTime);
      }
      updatedTime.style.display = '';
    }
  };
  Fluid.utils.createScript('https://lib.baomitu.com/moment.js/2.29.4/moment.min.js', function() {
    if (!'zh-cn'.startsWith('en')) {
      Fluid.utils.createScript('https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js', function() {
        relativeDate();
      });
    } else {
      relativeDate();
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
